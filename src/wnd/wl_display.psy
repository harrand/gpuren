gpuren_wl_display_setup : func(-> v0)
{
	// gpuren_wl_initialise must have been called
	wl.display = wl.wl_display_connect(zero);
	wl.registry = wl_display_get_registry(wl.display);
	registry_listener ::= wl_registry_listener
	{
		.global := gpuren_wl_registry_handle_global;
		.global_remove := gpuren_wl_registry_handle_global_remove;
	};
	wl_registry_add_listener(wl.registry, ref registry_listener, zero);
	wl.wl_display_roundtrip(wl.display);
};
